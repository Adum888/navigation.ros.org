

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Navigation Concepts &mdash; Navigation 2 1.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon-48x48.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'1.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorials" href="../tutorials/index.html" />
    <link rel="prev" title="Build Troubleshooting Guide" href="../build_instructions/build_docs/build_troubleshooting_guide.html" />

<link rel="stylesheet" href="../_static/tcs_theme.css" type="text/css" />


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Navigation 2
          

          
            
            <img src="../_static/logo_white_200w.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html#running-the-example">Running the Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html#navigating">Navigating</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../build_instructions/index.html">Build and Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../build_instructions/index.html#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_instructions/index.html#build">Build</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../build_instructions/index.html#build-navigation2-for-released-distribution">Build Navigation2 For Released Distribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/index.html#install-ros">Install ROS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/index.html#build-navigation2">Build Navigation2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../build_instructions/index.html#quickstart-build-master">Quickstart Build Master</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/index.html#steps">Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/index.html#options">Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../build_instructions/index.html#manually-build-master">Manually Build Master</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/index.html#build-ros-2-master">Build ROS 2 Master</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/index.html#build-navigation2-dependencies">Build Navigation2 Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/index.html#build-navigation2-master">Build Navigation2 Master</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../build_instructions/index.html#docker">Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../build_instructions/index.html#building-docker-container">Building Docker Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_instructions/index.html#using-dockerhub-container">Using DockerHub Container</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../build_instructions/index.html#generate-doxygen">Generate Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_instructions/index.html#help">Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../build_instructions/build_docs/build_troubleshooting_guide.html">Build Troubleshooting Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/build_docs/build_troubleshooting_guide.html#common-navigation2-dependencies-build-failures">Common Navigation2 Dependencies Build Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build_instructions/build_docs/build_troubleshooting_guide.html#reporting-issue">Reporting Issue</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Navigation Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ros2">ROS2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#action-server">Action Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lifecycle-nodes">Lifecycle Nodes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#behavior-trees">Behavior Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="#navigation-servers">Navigation Servers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#planner-controller-and-recovery-servers">Planner, Controller, and Recovery Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#planners">Planners</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controllers">Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recoveries">Recoveries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#state-estimation">State Estimation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#standards">Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#global-positioning-localization-and-slam">Global Positioning: Localization and SLAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#odometry">Odometry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#environmental-representation">Environmental Representation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#costmaps-and-layers">Costmaps and Layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-forms">Other Forms</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html">Navigating with a Physical Turtlebot 3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#setup-your-enviroment-variables">0- Setup Your Enviroment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#launch-turtlebot-3">1- Launch Turtlebot 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#launch-navigation2">2- Launch Navigation2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#launch-rviz">3-  Launch RVIZ</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#initialize-the-location-of-turtlebot-3">4- Initialize the Location of Turtlebot 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_on_real_turtlebot3.html#send-a-goal-pose">5-  Send a Goal Pose</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html">(SLAM) Navigating While Mapping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html#launch-robot-interfaces">0- Launch Robot Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html#launch-navigation2">1- Launch Navigation2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html#launch-slam">2- Launch SLAM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_slam.html#working-with-slam">3- Working with SLAM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html">(STVL) Using an External Costmap Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#costmap2d-and-stvl">Costmap2D and STVL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#setup">0- Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#install-stvl">1- Install STVL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#modify-navigation2-parameter">1- Modify Navigation2 Parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#launch-navigation2">2- Launch Navigation2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/navigation2_with_stvl.html#rviz">3-  RVIZ</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html">Writing a New Costmap2D Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html#write-a-new-costmap2d-plugin">1- Write a new Costmap2D plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html#export-and-make-gradientlayer-plugin">2- Export and make GradientLayer plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html#enable-the-plugin-in-costmap2d">3- Enable the plugin in Costmap2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_costmap2d_plugin.html#run-gradientlayer-plugin">4- Run GradientLayer plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html">Writing a New Planner Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html#creating-a-new-planner-plugin">1- Creating a new Planner Plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html#exporting-the-planner-plugin">2- Exporting the planner plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html#pass-the-plugin-name-through-params-file">3- Pass the plugin name through params file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorials/docs/writing_new_nav2planner_plugin.html#run-straightline-plugin">4- Run StraightLine plugin</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration/configuring-the-controller.html">Configuring The Controller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration/configuring-the-controller.html#controller-server">Controller Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration/configuring-the-controller.html#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/configuring-the-controller.html#progress-checker">Progress Checker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration/configuring-the-controller.html#id2">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/configuring-the-controller.html#dwb-controller">DWB Controller</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration/configuring-the-controller.html#id3">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/configuring-the-controller.html#additional-parameters">Additional Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/configuring-the-controller.html#debug-parameters">Debug Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/configuring-the-controller.html#dwb-plugins">DWB Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration/dwb-plugins/trajectory-generators.html">Trajectory Generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/dwb-plugins/trajectory-critics.html">Trajectory Critics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/dwb-plugins/goal-checkers.html">Goal Checkers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/params/tunable-params.html">Tunable Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#amcl">AMCL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#controller-server">Controller Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#local-costmap">Local Costmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#planner-server">Planner Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#global-costmap">Global Costmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#map-server">Map Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#recovery-server">Recovery Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/params/tunable-params.html#bt-navigator">BT Navigator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Navigation Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html#costmap-layers">Costmap Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html#controllers">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html#planners">Planners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html#recoveries">Recoveries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html#behavior-tree-nodes">Behavior Tree Nodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migration Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../migration/Dashing.html">Dashing to Eloquent</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../migration/Dashing.html#new-packages">New Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migration/Dashing.html#new-plugins">New Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migration/Dashing.html#navigation2-architectural-changes">Navigation2 Architectural Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../migration/Eloquent.html">Eloquent to Foxy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../migration/Eloquent.html#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migration/Eloquent.html#server-updates">Server Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migration/Eloquent.html#new-plugins">New Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migration/Eloquent.html#map-server-re-work">Map Server Re-Work</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Getting Involved</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/index.html#id1">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/index.html#process">Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/index.html#licensing">Licensing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/index.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About and Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/robots.html">Robots Using</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/ros1_comparison.html">ROS to ROS2 Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#id1">About</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#contact">Contact</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Navigation 2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Navigation Concepts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="navigation-concepts">
<span id="concepts"></span><h1>Navigation Concepts<a class="headerlink" href="#navigation-concepts" title="Permalink to this headline">¶</a></h1>
<p>This page is to help familiarize new robotists to the concepts of mobile robot navigation, in particular, with the concepts required to appreciating and working with this project.</p>
<div class="section" id="ros2">
<h2>ROS2<a class="headerlink" href="#ros2" title="Permalink to this headline">¶</a></h2>
<p>ROS2 is the core middleware used for Navigation2. If you are unfamilar with this, please visit <a class="reference external" href="https://index.ros.org/doc/ros2/">the ROS2 documentation</a> before continuing.</p>
<div class="section" id="action-server">
<h3>Action Server<a class="headerlink" href="#action-server" title="Permalink to this headline">¶</a></h3>
<p>Just as in ROS, action servers are a common way to control long running tasks like navigation.
This stack makes more extensive use of actions, and in some cases, without an easy topic interface.
It is more important to understand action servers as a developer in ROS2.
Some simple CLI examples can be found in the <a class="reference external" href="https://index.ros.org/doc/ros2/Tutorials/Understanding-ROS2-Actions/">ROS2 documementation</a>.</p>
<p>Action servers are similar to a canonical service server.
A client will request some task to be completed, except, this task may take a long time.
An example would be moving the shovel up from a bulldozer or ask a robot to travel 10 meters to the right.</p>
<p>In this situation, action servers and clients allow us to call a long-running task in another process or thread and return a future to its result.
It is permissible at this point to block until the action is complete, however, you may want to occasionally check if the action is complete and continue to process work in the client thread.
Since it is long-running, action servers will also provide feedback to their clients.
This feedback can be anything and is defined in the ROS <code class="docutils literal notranslate"><span class="pre">.action</span></code> along with the request and result types.
In the bulldozer example, a request may be an angle, a feedback may be the angle remaining to be moved, and the result is a success or fail boolean with the end angle.
In the navigation example, a request may be a position, a feedback may be the time its been navigating for and the distance to the goal, and the result a boolean for success.</p>
<p>Feedback and results can be gathered synchronously by registering callbacks with the action client.
They may also be gathered by asychronously requesting information from the shared future objects.
Both require spinning the client node to process callback groups.</p>
<p>Action servers are used in this stack to communicate with the highest level BT navigator through a <code class="docutils literal notranslate"><span class="pre">NavigateToPose</span></code> action message.
They are also used for the BT navigator to communicate with the subsequent smaller action servers to compute plans, control efforts, and recoveries.
Each will have their own unique <code class="docutils literal notranslate"><span class="pre">.action</span></code> type in <code class="docutils literal notranslate"><span class="pre">nav2_msgs</span></code> for interacting with the servers.</p>
</div>
<div class="section" id="lifecycle-nodes">
<h3>Lifecycle Nodes<a class="headerlink" href="#lifecycle-nodes" title="Permalink to this headline">¶</a></h3>
<p>Lifecycle (or Managed, more correctly) nodes are unique to ROS2.
More information can be <a class="reference external" href="https://design.ros2.org/articles/node_lifecycle.html">found here</a>.
They are nodes that contain state machine transitions for bringup and teardown of ROS2 servers.
This helps in determinstic behavior of ROS systems in startup and shutdown.
It also helps users structure their programs in reasonable ways for commercial uses and debugging.</p>
<p>When a node is started, it is in the unconfigured state, only processing the node’s constructor which should <strong>not</strong> contain any ROS networking setup or parameter reading.
By the launch system, or the supplied lifecycle manager, the nodes need to be transitioned to inactive by configuring.
After, it is possible to activate the node by transitioning through the activing stage.</p>
<p>This state will allow the node to process information and be fully setup to run.
The configuration stage, triggering the <code class="docutils literal notranslate"><span class="pre">on_configure()</span></code> method, will setup all parameters, ROS networking interfaces, and for safety systems, all dynamically allocated memory.
The activation stage, triggering the <code class="docutils literal notranslate"><span class="pre">on_activate()</span></code> method, will active the ROS networking interfaces and set any states in the program to start processing information.</p>
<p>To shutdown, we transition into deactivating, cleaning up, shutting down and end in the finalized state.
The networking interfaces are deactivated and stop processing, deallocate memory, exit cleanly, in those stages, respectively.</p>
<p>The lifecycle node framework is used extensively through out this project and all servers utilize it.
It is best convention for all ROS systems to use lifecycle nodes if it is possible.</p>
</div>
</div>
<div class="section" id="behavior-trees">
<h2>Behavior Trees<a class="headerlink" href="#behavior-trees" title="Permalink to this headline">¶</a></h2>
<p>Behavior trees (BT) are becoming increasingly common in complex robotics tasks.
They are a tree structure of tasks to be completed.
It creates a more scalable and human-understandable framework for defining multi-step or many state applications.
This is opposed to a finite state machine (FSM) which may then have dozens or states and hundreds of transitions.
An example would be a soccer playing robot.
Embedding the logic of soccer game play into a FSM would be challenging and error prone with many possible states and rules.
Additionally, modeling choices like to shoot at the goal from the left, right, or center, is particularly unclear.
With a BT, basic primitives like “kick” “walk” “go to ball” can be created and reused for many behaviors.
More information can be found <a class="reference external" href="https://arxiv.org/abs/1709.00084">in this book</a>.
I <strong>strongly</strong> recommend reading chapters 1-3 to get a good understanding of the nomenclature and workflow.
It should only take about 30 minutes.</p>
<p>For this project, we use <a class="reference external" href="https://www.behaviortree.dev/">BehaviorTree CPP V3</a> as the behavior tree library.
We create node plugins which can be constructed into a tree, inside the <code class="docutils literal notranslate"><span class="pre">BT</span> <span class="pre">Navigato</span></code>.
The node plugins are loaded into the BT and when the XML file of the tree is parsed, the registered names are associated.
At this point, we can march through the behavior tree to navigate.</p>
<p>One reason this library is used is its ability to load subtrees. This means that the Navigation2 behavior tree can be loaded into another higher-level BT to use this project as node plugin.
An example would be in soccer play, using the Navigation2 behavior tree as the “go to ball” node with a ball detection as part of a larger task.
Additionally, we supply a <code class="docutils literal notranslate"><span class="pre">NavigateToPoseAction</span></code> plugin for BT so the Navigation2 stack can be called from a client application through the usual action interface.</p>
</div>
<div class="section" id="navigation-servers">
<h2>Navigation Servers<a class="headerlink" href="#navigation-servers" title="Permalink to this headline">¶</a></h2>
<p>Planners and controllers are at the heart of a navigation task.
Recoveries are used to get the robot out of a bad situation or attempt to deal with various forms of issues to make the system fault-tolerant.
In this section, the general concepts around them and their uses in this project are analyzed.</p>
<div class="section" id="planner-controller-and-recovery-servers">
<h3>Planner, Controller, and Recovery Servers<a class="headerlink" href="#planner-controller-and-recovery-servers" title="Permalink to this headline">¶</a></h3>
<p>Three of the action servers in this project are the planner, recovery, and controller servers.
These action servers are used to host a map of algorithm plugins to complete various tasks.
They also host the environmental representation used by the algorithm plugins to compute their outputs.</p>
<p>The planner and controller servers will be configured at runtime with the names (aliases) and types of algorithms to use.
These types are the pluginlib names that have been registered and the names are the aliases for the task.
An example would be the DWB controller used with name <code class="docutils literal notranslate"><span class="pre">FollowPath</span></code>, as it follows a reference path.
In this case, then all parameters for DWB would be placed in that namespace, e.g. <code class="docutils literal notranslate"><span class="pre">FollowPath.&lt;param&gt;</span></code>.</p>
<p>These two servers then expose an action interface corresponding to its task.
When the behavior tree ticks the corresponding BT node, it will call the action server to process its task.
The action server callback inside the server will call the chosen algorithm by its name (e.g. <code class="docutils literal notranslate"><span class="pre">FollowPath</span></code>) that maps to a specific algorithm.
This allows a user to abstract the algorithm used in the behavior tree to classes of algorithms.
For instance, you can have <code class="docutils literal notranslate"><span class="pre">N</span></code> plugin controllers to follow paths, dock with charger, avoid dynamic obstacles, or interface with a tool.
Having all of these plugins in the same server allows the user to make use of a single environmental representation object, which is costly to duplicate.</p>
<p>For the recovery server, each of the recoveries also contains their own name, however, each plugin will also expose its own special action server.
This is done because of the wide variety of recovery actions that may be created cannot have a single simple interface to share.
The recovery server also contains a costmap subscriber to the local costmap, receiving real-time updates from the controller server, to compute its tasks.
We do this to avoid having multiple instances of the local costmap which are computationally expensive to duplicate.</p>
<p>Alternatively, since the BT nodes are trivial plugins calling an action, new BT nodes can be created to call other action servers with other action types.
It is advisable to use the provided servers if possible at all times.
If, due to the plugin or action interfaces, a new server is needed, that can be sustained with the framework.
The new server should use the new type and plugin interface, similar to the provided servers.
A new BT node plugin will need to be created to call the new action server – however no forking or modification is required in the navigation2 repo itself by making extensive use of servers and plugins.</p>
<p>If you find that you require a new interface to the pluginlib definition or action type, please file a ticket and see if we can rectify that in the same interfaces.</p>
</div>
<div class="section" id="planners">
<h3>Planners<a class="headerlink" href="#planners" title="Permalink to this headline">¶</a></h3>
<p>The task of a planner is to compute a path to complete some objective function.
The path can also be known as a route, depending on the nomenclature and algorithm selected.
Two canonical examples are computing a plan to a goal (e.g. from current position to a goal) or complete coverage (e.g. plan to cover all free space).
The planner will have access to a global environmental representation and sensor data buffered into it.
Planners can be written to:</p>
<ul class="simple">
<li>Compute shortest path</li>
<li>Compute complete coverage path</li>
<li>Compute paths along sparse or predefined routes</li>
</ul>
<p>The general task in Navigation2 for the planner is to compute a valid, and potentially optimal, path from the current pose to a goal pose.
However, many classes of plans and routes exist which are supported.</p>
</div>
<div class="section" id="controllers">
<h3>Controllers<a class="headerlink" href="#controllers" title="Permalink to this headline">¶</a></h3>
<p>Controllers, also known as local planners in ROS1, are the way we follow the globally computed path or complete a local task.
The controller will have access to a local environment representation to attempt to compute feasible control efforts for the base to follow.
Many controller will project the robot forward in space and compute a locally feasible path at each update iteration.
Controllers can be written to:</p>
<ul class="simple">
<li>Follow a path</li>
<li>Dock with a charging station using detectors in the odometric frame</li>
<li>Board an elevator</li>
<li>Interface with a tool</li>
</ul>
<p>The general task in Navigation2 for a controller is to compute a valid control effort to follow the global plan.
However, many classes of controllers and local planners exist.
It is the goal of this project that all controller algorithms can be plugins in this server for common research and industrial tasks.</p>
</div>
<div class="section" id="recoveries">
<h3>Recoveries<a class="headerlink" href="#recoveries" title="Permalink to this headline">¶</a></h3>
<p>Recoveries are a mainstay of fault-tolerant systems.
The goal of recoveries are to deal with unknown or failure conditions of the system and autonomously handle them.
Examples may include faults in the perception system resulting in the environmental representation being full of fake obstacles.
The clear costmap recovery would then be triggered to allow the robot to move.</p>
<p>Another example would be if the robot was stuck due to dynamic obstacles or poor control.
Backing up or spinning in place, if permissible, allow the robot to move from a poor location into free space it may navigate successfully.</p>
<p>Finally, in the case of a total failure, a recovery may be implemented to call an operators attention for help.
This can be done with email, SMS, Slack, Matrix, etc.</p>
</div>
</div>
<div class="section" id="state-estimation">
<h2>State Estimation<a class="headerlink" href="#state-estimation" title="Permalink to this headline">¶</a></h2>
<p>Within the navigation project, there are 2 major transformations that need to be provided, according to community standards.
The <code class="docutils literal notranslate"><span class="pre">map</span></code> to <code class="docutils literal notranslate"><span class="pre">odom</span></code> transform is provided by a positioning system (localization, mapping, SLAM) and <code class="docutils literal notranslate"><span class="pre">odom</span></code> to <code class="docutils literal notranslate"><span class="pre">base_link</span></code> by an odometry system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is <strong>no</strong> requirement on using a LIDAR on your robot to use the navigation system. There is no requirement to use lidar-based collision avoidance,
localization, or slam. However, we do provide instructions and support tried and true implementations of these things using lidars.
You can be equally as successful using a vision or depth based positioning system and using other sensors for collision avoidance.
The only requirement is that you follow the standards below with your choice of implementation.</p>
</div>
<div class="section" id="standards">
<h3>Standards<a class="headerlink" href="#standards" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.ros.org/reps/rep-0105.html">REP 105</a> defines the frames and conventions required for navigation and the larger ROS ecosystem.
These conventions should be followed at all times to make use of the rich positioning, odometry, and slam projects available in the community.</p>
<p>In a nutshell, REP-105 says that you must, at minimum, build a TF tree that contains a full <code class="docutils literal notranslate"><span class="pre">map</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">odom</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">base_link</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">[sensor</span> <span class="pre">frames]</span></code> for your robot.
TF2 are the time-variant transformation library in ROS2 we use to represent and obtain time synchronized transformations.
It is the job of the global positioning system (GPS, SLAM, Motion Capture) to, at minimum, provide the <code class="docutils literal notranslate"><span class="pre">map</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">odom</span></code> transformation.
It is then the role of the odometry system to provide the <code class="docutils literal notranslate"><span class="pre">odom</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">base_link</span></code> transformation.
The remainder of the transformations relative to <code class="docutils literal notranslate"><span class="pre">base_link</span></code> should be static and defined in your <a class="reference external" href="http://wiki.ros.org/urdf">URDF</a>.</p>
</div>
<div class="section" id="global-positioning-localization-and-slam">
<h3>Global Positioning: Localization and SLAM<a class="headerlink" href="#global-positioning-localization-and-slam" title="Permalink to this headline">¶</a></h3>
<p>It is the job of the global positioning system (GPS, SLAM, Motion Capture) to, at minimum, provide the <code class="docutils literal notranslate"><span class="pre">map</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">odom</span></code> transformation.
We provide <code class="docutils literal notranslate"><span class="pre">amcl</span></code> which is an Adaptive Monte-Carlo Localization technique based on a particle filter for localization of a static map.
We also provide SLAM Toolbox as the default SLAM algorithm for use to position and generate a static map.</p>
<p>These methods may also produce other output including position topics, maps, or other metadata, but they must provide that transformation to be valid.
Multiple positioning methods can be fused together using robot localization, discussed more below.</p>
</div>
<div class="section" id="odometry">
<h3>Odometry<a class="headerlink" href="#odometry" title="Permalink to this headline">¶</a></h3>
<p>It is the role of the odometry system to provide the <code class="docutils literal notranslate"><span class="pre">odom</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">base_link</span></code> transformation.
Odometry can come from many sources including LIDAR, RADAR, wheel encoders, VIO, and IMUs.
The goal of the odometry is to provide a smooth and continuous local frame based on robot motion.
The global positioning system will update the transformation relative to the global frame to account for the odometric drift.</p>
<p><a class="reference external" href="https://github.com/cra-ros-pkg/robot_localization/">Robot Localization</a> is typically used for this fusion.
It will take in <code class="docutils literal notranslate"><span class="pre">N</span></code> sensors of various types and provide a continuous and smooth odometry to TF and to a topic.
A typical mobile robotics setup may have odometry from wheel encoders, IMUs, and vision fused in this manor.</p>
<p>The smooth output can be used then for dead-reckoning for precise motion and updating the position of the robot accurately between global position updates.</p>
</div>
</div>
<div class="section" id="environmental-representation">
<h2>Environmental Representation<a class="headerlink" href="#environmental-representation" title="Permalink to this headline">¶</a></h2>
<p>The environmental representation is the way the robot perceives its environment.
It also acts as the central localization for various algorithms and data sources to combine their information into a single space.
This space is then used by the controllers, planners, and recoveries to compute their tasks safely and efficiently.</p>
<div class="section" id="costmaps-and-layers">
<h3>Costmaps and Layers<a class="headerlink" href="#costmaps-and-layers" title="Permalink to this headline">¶</a></h3>
<p>The current environmental representation is a costmap.
A costmap is a regular 2D grid of cells containing a cost from unknown, free, occupied, or inflated cost.
This costmap is then searched to compute a global plan or sampled to compute local control efforts.</p>
<p>Various costmap layers are implemented as pluginlib plugins to buffer information into the costmap.
This includes information from LIDAR, RADAR, sonar, depth, images, etc.
It may be wise to process sensor data before inputting it into the costmap layer, but that is up to the developer.</p>
<p>Costmap layers can be created to detect and track obstacles in the scene for collision avoidance using camera or depth sensors.
Additionally, layers can be created to algorithmically change the underlying costmap based on some rule or heuristic.
Finally, they may be used to buffer live data into the 2D or 3D world for binary obstacle marking.</p>
</div>
<div class="section" id="other-forms">
<h3>Other Forms<a class="headerlink" href="#other-forms" title="Permalink to this headline">¶</a></h3>
<p>Various other forms of environmental representations exist.
These include:</p>
<ul class="simple">
<li>gradient maps, which are similar to costmaps but represent surface gradients to check traversibility over</li>
<li>3D costmaps, which represent the space in 3D, but then also requires 3D planning and collision checking</li>
<li>Mesh maps, which are similar to gradient maps but with surface meshes at many angles</li>
<li>“Vector space”, taking in sensor information and using machine learning to detect individual items and locations to track rather than buffering discrete points.</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  

<script type="text/javascript" src="../_static/tcs_theme.js"></script>



</body>
</html>